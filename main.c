/*--------------------------------------------------------------------*/
/* main.c                                                             */
/*--------------------------------------------------------------------*/

#include "add.h"
#include "multiply.h"
#include "print.h"
#include "runtime.h"

/*--------------------------------------------------------------------*/

int main() {
    Matrix_t matrix_A, matrix_B;
    matrix_A.m = 15;
    matrix_A.n = 15;
    matrix_B.m = 15;
    matrix_B.n = 15;
    int32_t elementsA[225] = {63, 58, 6, 94, 73, 74, 7, 87, 94, 99, 86, 79, 52, 18, 40, 14, 4, 94, 31, 30, 34, 47, 65, 3, 85, 56, 86, 35, 45, 6, 18, 67, 34, 90, 12, 99, 54, 71, 100, 29, 42, 47, 77, 82, 11, 18, 36, 6, 53, 34, 18, 21, 91, 68, 47, 92, 11, 75, 74, 57, 19, 60, 30, 14, 22, 90, 8, 25, 6, 45, 2, 90, 20, 10, 31, 46, 11, 100, 34, 30, 7, 30, 5, 51, 77, 64, 9, 9, 78, 91, 54, 11, 83, 34, 30, 75, 2, 5, 67, 61, 53, 73, 71, 79, 29, 70, 56, 40, 7, 79, 34, 61, 75, 11, 13, 55, 49, 90, 80, 74, 6, 8, 9, 80, 95, 69, 14, 73, 12, 12, 65, 33, 66, 75, 59, 75, 24, 74, 98, 87, 9, 37, 37, 69, 60, 79, 37, 21, 9, 78, 21, 39, 56, 23, 65, 49, 16, 79, 11, 30, 24, 54, 10, 41, 11, 12, 79, 30, 61, 97, 44, 70, 76, 44, 66, 11, 94, 19, 27, 80, 49, 77, 40, 28, 4, 68, 43, 46, 61, 6, 32, 78, 70, 13, 14, 10, 1, 43, 66, 73, 54, 11, 64, 13, 14, 10, 15, 17, 20, 32, 32, 22, 26, 90, 71, 56, 19, 22, 8, 92, 71, 56, 32, 17, 63};
    int32_t elementsB[225] = {99, 18, 26, 40, 8, 69, 41, 99, 41, 63, 16, 39, 17, 76, 88, 36, 69, 30, 54, 84, 60, 34, 30, 46, 43, 36, 56, 75, 43, 43, 13, 3, 30, 32, 66, 96, 94, 46, 25, 77, 76, 75, 75, 11, 69, 47, 22, 10, 83, 18, 17, 67, 90, 52, 71, 16, 96, 55, 68, 4, 81, 75, 13, 53, 33, 55, 40, 42, 19, 26, 3, 93, 66, 94, 17, 93, 80, 58, 45, 26, 76, 23, 7, 77, 68, 72, 65, 42, 40, 82, 32, 82, 79, 86, 51, 64, 96, 45, 7, 87, 64, 36, 100, 23, 66, 61, 39, 15, 3, 43, 19, 73, 38, 85, 74, 58, 18, 96, 27, 93, 23, 38, 9, 65, 19, 5, 73, 35, 67, 39, 63, 3, 92, 81, 75, 82, 39, 62, 58, 54, 28, 25, 46, 23, 81, 99, 3, 54, 9, 81, 99, 7, 94, 2, 69, 79, 54, 89, 90, 63, 14, 22, 19, 5, 11, 62, 94, 36, 42, 99, 95, 68, 99, 77, 34, 67, 25, 30, 69, 53, 42, 61, 76, 59, 56, 59, 52, 9, 72, 100, 36, 98, 35, 89, 46, 42, 22, 13, 31, 73, 79, 70, 1, 85, 93, 78, 5, 38, 71, 73, 23, 27, 68, 48, 63, 24, 18, 83, 77, 94, 11, 19, 10, 49, 20};
    matrix_A.elements = elementsA;
    matrix_B.elements = elementsB;

    Matrix_t sum;
    int32_t elementsSum[4];
    sum.elements = elementsSum;

    // printf("Vector Addition: \n");

    // printMatrix(matrix_A);
    // printf("\n");
    // printMatrix(matrix_B);
    // printf("\n");
    
    start_timer();
    add(matrix_A, matrix_B, &sum);
    stop_timer();
    int64_t cycle_time = get_timer();

    // printMatrix(sum);

    printf("Runtime (cycles): %d\n", cycle_time);


    Matrix_t product;
    int32_t elementsProd[4];
    product.elements = elementsProd;

    // printf("Vector Multiplication: \n");

    // printMatrix(matrix_A);
    // printf("\n");
    // printMatrix(matrix_B);
    // printf("\n");

    start_timer();
    multiply(matrix_A, matrix_B, &product);
    stop_timer();
    int64_t cycle_timeb = get_timer();
    
    // printMatrix(product);

    printf("Runtime (cycles): %d\n", cycle_timeb);

    return 0;
}
